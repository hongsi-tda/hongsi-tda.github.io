---
title:  "TIS 200530"
excerpt:  "Class 01"

categories:
  - TIS
tags:
  - SQL
  
toc: true
toc_sticky: true
---

## SQL Class Notes 2020.05.30

by 러닝스푼즈 김경수 강사님


### 강의를 효과적으로 수강하는 방법

1. 출석 (지각)
2. 복습 (실습)
3. 질문


### 데이터 모델의 이해 

논리 | 물리
-----|------
DATA MODEL | DATABASE
ERD | DATA
ER-MODEL | DBMS, RDB, SQL

Database 는 데이터가 저장된 공간 (좁은 의미)

DBMS(DataBase Management System)는 SQL로 소통하는 소프트웨어 

e.g. Oracle, MYSQL, MS-SQL


#### 데이터 모델이란?

추상화, 단순화(표기법), 명확화


#### 데이터 모델링이란?

DB 구축을 위한 분석 / 설계의 과정

분석 : `비즈니스 + DB(AS-IS)` => `DB(TO-BE)`

표기법을 통해 나타내는 것이 설계, Data Model (ERD)


1. 개념적 데이터 모델링 (핵심 엔터티, 추상화 높음)

2. 논리적 데이터 모델링 (업무 요구사항, 논리적 구체화)
    - 어디에 어떻게 데이터가 저장되어 있는가?
    - 한글

3. 물리적 데이터 모델링 (실제로 이식할 수 있게 성능, 저장 등 물리적 성격 고려해 구체화)
    - 여기서부터 영문 활용


#### 데이터 모델링의 요소

1. 엔터티 -> 테이블

사람, 사물, 개념(e.g. 프로모션, 조직도), 행위(e.g. 결제) 등

업무상 필요로 하고, 동질성을 가진 개체 집합 또는 행위 집합

* 슈퍼타입 엔터티 : 일반화, 상위 집합 (e.g. 고객)
* 서브타입 엔터티 : 상세화, 부분 집합 (e.g. 고객 유형 분류 - 개인, 법인, 개인 사업자 등)

`슈퍼타입 (포함)> 서브타입`


2. 관계

엔터티간 논리적 상호 연관성

* 관계 차수 : 참여자의 수 
    - `1:1`, `1:M`, `M:M`
    - 궁극적으로는 1:1, 1:M 만 남게됨

* 선택성
    - 필수
    - 선택

설계 / 데이터 문제 -> 데이터 품질 문제 판단

> Garbage in, Garbage out


3. 속성 : 엔터티가 가진 특징이나 성질, 개체 집합에 대해 관리하고자 하는 항목 

**"의미적으로 더 이상 분리되지 않는 최소의 데이터 단위"**

e.g. 행정구 : 공공기관(시도, 시군구, 읍면동), 온라인 쇼핑몰(우편번호, 상세주소) 


4. 식별자

속성의 하위 단위, 엔터티 내 각 개체를 유일하게 식별할 수 있는 속성

* 조건 : 중복 X + NOT NULL

* 특징 : 유일성, 최소성, 불변성, 존재성(NOT NULL)

* 분류 : 주/보조, 단일/복합, 본질/인조

e.g. 주문번호 vs 주문일자 + 고객번호 + 주문순번

식별관계 | 비식별관계
---------|-----------
자식에서도 식별자 속성으로 사용 | 자식에서 일반속성으로 사용
강한 관계 | 약한 관계


### ERD 표기법

I/E 에서는 필수속성(not null) 과 선택속성(nullable) 구분 어려워

슈퍼타입/서브타입 exclusive(서브타입내 겹치는게 없다), inclusive(서브타입 내 겹치는게 있을수 있다)

없는 표기법이나 성질도 소프트웨어에 도움을 받아 나타낼 수 있음

(img)


#### 관계 읽기

양방향, 두개씩 순차적으로 

1. 엔터티
2. 관계 차수
3. 상대 엔터티
4. 관계 선택성

관계명 양쪽 다 존재하는게 정석이지만 (e.g. 소속된다, 포함한다)

복잡해질 수 있어서 가운데에 하나만 지정 (능동 / 수동)

**연습하기!**


### 정규화와 반정규화


#### 정규화

이상 현상(Anomaly) : 데이터 중복으로 삽입 / 갱신 / 삭제 이상 

함수 종속 : `결정자 속성 = 식별자 속성 -(종속됨)- 일반 속성`


multi-value : 속성은 최소 단위인데(하나의 값만 가져야함) 다중의 값을 가질 때
    -> 열을 추가 (비유연성) / 행을 추가 (데이터 중복) 
    -> 데이터 저장공간 증대, 비효율적, 복합성 증가

해결 :

비정규형 

-> (1차 정규화)

1. 제 1 정규형 : multi-value 문제 -> 모든 속성의 값이 원자값(atomic value)으로만 구성되도록, 엔터티로 분리

-> (2차 정규화)

2. 제 2 정규형 : 부분 종속 문제 -> 주식별자가 아닌 모든 속성이 주식별자 속성에 완전 함수 종속되도록

->(3차 정규화)

3. 제 3 정규형 : 이행적 함수 종속 문제 -> 일반 속성들 간에 함수 종속이 없도록

`사원번호 > 부서번호 > 부서위치 (이행적 함수 종속)`

*'화'는 과정, '형'은 결과*

테이블 나누고 SQL 로 조회


#### 반정규화(De-Normalization)

성능 향상과 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링 기법

데이터 무결성/완전성/품질 깨질 수 있으므로 
데이터 정합성을 지키기 위한 별도의 방안 마련 필요!

예외적으로
