## 10 minute to Pandas

- from https://dataitgirls2.github.io/10minutes2pandas/

#### Jupyter Notebook 
- mode
    - 명령모드(esc): 셀을 수정할때 사용; 지우거나 되살리거나
    - 편집모드(enter): 셀안의 내용을 수정할때 사용
- style
    - markdown(명령모드 + m): 셀안의 설명을 작성할때 사용
    - code(명령모드 + y): 파이썬 코드 작성할때 사용
- 단축기
    - 셀 실행: shift + enter
    - 셀 삭제: (명령모드) x
    - 되돌리기: (명령모드) z
    - 셀 생성: (명령모드) a(위에), b(아래)
    - 줄번호 생성: (명령모드) l


```python
# import package
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
```

### 1. object creation

- Data Structure Intro section : https://pandas.pydata.org/pandas-docs/stable/getting_started/dsintro.html#dsintro


```python
# list -> series with default integer index
s = pd.Series([1, 3, 5, np.nan, 6, 8])
s
```




    0    1.0
    1    3.0
    2    5.0
    3    NaN
    4    6.0
    5    8.0
    dtype: float64




```python
# datetime index
dates = pd.date_range('20200225', periods=6)
dates
```




    DatetimeIndex(['2020-02-25', '2020-02-26', '2020-02-27', '2020-02-28',
                   '2020-02-29', '2020-03-01'],
                  dtype='datetime64[ns]', freq='D')




```python
# np arrary -> df with datetime index & labeled columns
df = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('ABCD'))
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.314305</td>
      <td>-0.319532</td>
      <td>-1.494414</td>
      <td>0.513665</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
      <td>-1.226722</td>
      <td>-1.553299</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>-0.271936</td>
      <td>2.119364</td>
      <td>0.402742</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>-0.146831</td>
      <td>-0.218701</td>
      <td>-0.280393</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.968962</td>
      <td>0.428461</td>
      <td>-1.488577</td>
      <td>0.859123</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.747295</td>
      <td>-1.391477</td>
      <td>-1.879725</td>
      <td>-1.155307</td>
    </tr>
  </tbody>
</table>
</div>




```python
# dict(key : value) -> df can be converted into series.
df2 = pd.DataFrame({'A' : 1., 
                    'B' : pd.Timestamp('20200225'), 
                    'C' : pd.Series(1, index=list(range(4)), dtype='float32'),
                    'D' : np.array([3]*4, dtype='int32'), 
                    'E' : pd.Categorical(["test", "train", "test", "train"]), 
                    'F': 'foo'})
df2
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>E</th>
      <th>F</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.0</td>
      <td>2020-02-25</td>
      <td>1.0</td>
      <td>3</td>
      <td>test</td>
      <td>foo</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.0</td>
      <td>2020-02-25</td>
      <td>1.0</td>
      <td>3</td>
      <td>train</td>
      <td>foo</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.0</td>
      <td>2020-02-25</td>
      <td>1.0</td>
      <td>3</td>
      <td>test</td>
      <td>foo</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1.0</td>
      <td>2020-02-25</td>
      <td>1.0</td>
      <td>3</td>
      <td>train</td>
      <td>foo</td>
    </tr>
  </tbody>
</table>
</div>




```python
# each df column has different dtype.
df2.dtypes
```




    A           float64
    B    datetime64[ns]
    C           float32
    D             int32
    E          category
    F            object
    dtype: object




```python
# df2.<TAB> 
# shows attributes that can be completed. (자동완성)
```

### 2. viewing data

- Basics section : https://pandas.pydata.org/pandas-docs/stable/getting_started/basics.html#basics


```python
# viewing top & bottom rows of the df
df.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.314305</td>
      <td>-0.319532</td>
      <td>-1.494414</td>
      <td>0.513665</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
      <td>-1.226722</td>
      <td>-1.553299</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>-0.271936</td>
      <td>2.119364</td>
      <td>0.402742</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>-0.146831</td>
      <td>-0.218701</td>
      <td>-0.280393</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.968962</td>
      <td>0.428461</td>
      <td>-1.488577</td>
      <td>0.859123</td>
    </tr>
  </tbody>
</table>
</div>




```python
df.tail(3)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>-0.146831</td>
      <td>-0.218701</td>
      <td>-0.280393</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.968962</td>
      <td>0.428461</td>
      <td>-1.488577</td>
      <td>0.859123</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.747295</td>
      <td>-1.391477</td>
      <td>-1.879725</td>
      <td>-1.155307</td>
    </tr>
  </tbody>
</table>
</div>




```python
df.index # displays index.
```




    DatetimeIndex(['2020-02-25', '2020-02-26', '2020-02-27', '2020-02-28',
                   '2020-02-29', '2020-03-01'],
                  dtype='datetime64[ns]', freq='D')




```python
df.columns # displays columns.
```




    Index(['A', 'B', 'C', 'D'], dtype='object')



#### df.to_numpy()

- from dataframe to numpy array
- warning : np arrays have 1 dtype and pd df have 1 per column.
    - if df -> np, pd will find 1 np dypte for holding all in df. 
    - ending up 'object' (전처리...)


```python
df.dtypes # single dtype (float)
```




    A    float64
    B    float64
    C    float64
    D    float64
    dtype: object




```python
df.to_numpy() # fast & no need for copying data.
```




    array([[ 0.31430544, -0.31953194, -1.49441389,  0.51366458],
           [ 0.92489143, -0.08760478, -1.2267224 , -1.55329922],
           [ 0.2327496 , -0.27193634,  2.11936386,  0.4027418 ],
           [ 0.07465042, -0.14683084, -0.21870114, -0.28039294],
           [-1.96896215,  0.42846138, -1.48857652,  0.85912343],
           [ 0.74729481, -1.39147676, -1.8797246 , -1.15530654]])




```python
df2.dtypes # multiple dtypes
```




    A           float64
    B    datetime64[ns]
    C           float32
    D             int32
    E          category
    F            object
    dtype: object




```python
df2.to_numpy() # expensive 
# & does not include index or column lables in output. 
```




    array([[1.0, Timestamp('2020-02-25 00:00:00'), 1.0, 3, 'test', 'foo'],
           [1.0, Timestamp('2020-02-25 00:00:00'), 1.0, 3, 'train', 'foo'],
           [1.0, Timestamp('2020-02-25 00:00:00'), 1.0, 3, 'test', 'foo'],
           [1.0, Timestamp('2020-02-25 00:00:00'), 1.0, 3, 'train', 'foo']],
          dtype=object)




```python
df.describe() # shows stat.summary of data.
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>6.000000</td>
      <td>6.000000</td>
      <td>6.000000</td>
      <td>6.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.054155</td>
      <td>-0.298153</td>
      <td>-0.698129</td>
      <td>-0.202245</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.042269</td>
      <td>0.598615</td>
      <td>1.490139</td>
      <td>0.974148</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-1.968962</td>
      <td>-1.391477</td>
      <td>-1.879725</td>
      <td>-1.553299</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.114175</td>
      <td>-0.307633</td>
      <td>-1.492955</td>
      <td>-0.936578</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.273528</td>
      <td>-0.209384</td>
      <td>-1.357649</td>
      <td>0.061174</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.639047</td>
      <td>-0.102411</td>
      <td>-0.470706</td>
      <td>0.485934</td>
    </tr>
    <tr>
      <th>max</th>
      <td>0.924891</td>
      <td>0.428461</td>
      <td>2.119364</td>
      <td>0.859123</td>
    </tr>
  </tbody>
</table>
</div>




```python
df.T # transposes data. 
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>2020-02-25</th>
      <th>2020-02-26</th>
      <th>2020-02-27</th>
      <th>2020-02-28</th>
      <th>2020-02-29</th>
      <th>2020-03-01</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>A</th>
      <td>0.314305</td>
      <td>0.924891</td>
      <td>0.232750</td>
      <td>0.074650</td>
      <td>-1.968962</td>
      <td>0.747295</td>
    </tr>
    <tr>
      <th>B</th>
      <td>-0.319532</td>
      <td>-0.087605</td>
      <td>-0.271936</td>
      <td>-0.146831</td>
      <td>0.428461</td>
      <td>-1.391477</td>
    </tr>
    <tr>
      <th>C</th>
      <td>-1.494414</td>
      <td>-1.226722</td>
      <td>2.119364</td>
      <td>-0.218701</td>
      <td>-1.488577</td>
      <td>-1.879725</td>
    </tr>
    <tr>
      <th>D</th>
      <td>0.513665</td>
      <td>-1.553299</td>
      <td>0.402742</td>
      <td>-0.280393</td>
      <td>0.859123</td>
      <td>-1.155307</td>
    </tr>
  </tbody>
</table>
</div>




```python
# sorting by axes (axis=0 : rows, axis=1 : columns)
df.sort_index(axis=1, ascending=False)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>D</th>
      <th>C</th>
      <th>B</th>
      <th>A</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.513665</td>
      <td>-1.494414</td>
      <td>-0.319532</td>
      <td>0.314305</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>-1.553299</td>
      <td>-1.226722</td>
      <td>-0.087605</td>
      <td>0.924891</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.402742</td>
      <td>2.119364</td>
      <td>-0.271936</td>
      <td>0.232750</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>-0.280393</td>
      <td>-0.218701</td>
      <td>-0.146831</td>
      <td>0.074650</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>0.859123</td>
      <td>-1.488577</td>
      <td>0.428461</td>
      <td>-1.968962</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>-1.155307</td>
      <td>-1.879725</td>
      <td>-1.391477</td>
      <td>0.747295</td>
    </tr>
  </tbody>
</table>
</div>




```python
# sorting by values
df.sort_values(by='B') # defalut : ascending
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-03-01</th>
      <td>0.747295</td>
      <td>-1.391477</td>
      <td>-1.879725</td>
      <td>-1.155307</td>
    </tr>
    <tr>
      <th>2020-02-25</th>
      <td>0.314305</td>
      <td>-0.319532</td>
      <td>-1.494414</td>
      <td>0.513665</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>-0.271936</td>
      <td>2.119364</td>
      <td>0.402742</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>-0.146831</td>
      <td>-0.218701</td>
      <td>-0.280393</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
      <td>-1.226722</td>
      <td>-1.553299</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.968962</td>
      <td>0.428461</td>
      <td>-1.488577</td>
      <td>0.859123</td>
    </tr>
  </tbody>
</table>
</div>



### 3. selection

- Indexing and Selecting Data : https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#indexing
- MultiIndex / Advanced Indexing : https://pandas.pydata.org/pandas-docs/stable/user_guide/advanced.html#advanced
- `.at, .iat, .loc, .iloc`

- loc vs iloc:
The loc indexer can also do boolean selection. For instance, if we are interested in finding all the rows where Age is less 30 and return just the Color and Height columns we can do the following. We can replicate this with iloc but we cannot pass it a boolean series. We must convert the boolean Series into a numpy array.
loc gets rows (or columns) with particular labels from the index.
iloc gets rows (or columns) at particular positions in the index (so it only takes integers).

#### getting


```python
# selecting a column (yields a series)
df['A']
```




    2020-02-25    0.314305
    2020-02-26    0.924891
    2020-02-27    0.232750
    2020-02-28    0.074650
    2020-02-29   -1.968962
    2020-03-01    0.747295
    Freq: D, Name: A, dtype: float64




```python
df.A
```




    2020-02-25    0.314305
    2020-02-26    0.924891
    2020-02-27    0.232750
    2020-02-28    0.074650
    2020-02-29   -1.968962
    2020-03-01    0.747295
    Freq: D, Name: A, dtype: float64




```python
# slicing rows
df[0:3]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.314305</td>
      <td>-0.319532</td>
      <td>-1.494414</td>
      <td>0.513665</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
      <td>-1.226722</td>
      <td>-1.553299</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>-0.271936</td>
      <td>2.119364</td>
      <td>0.402742</td>
    </tr>
  </tbody>
</table>
</div>



#### selection by label

- Selection by Label : https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#indexing-label


```python
# cross selection 
df.loc[dates[0]] # first row
```




    A    0.314305
    B   -0.319532
    C   -1.494414
    D    0.513665
    Name: 2020-02-25 00:00:00, dtype: float64




```python
# multi-axis selection 
df.loc[:, ['A', 'B']]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.314305</td>
      <td>-0.319532</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>-0.271936</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>-0.146831</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.968962</td>
      <td>0.428461</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.747295</td>
      <td>-1.391477</td>
    </tr>
  </tbody>
</table>
</div>




```python
# label slicing with both endpoints
df.loc['20200227':'20200301', ['C', 'D']]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-27</th>
      <td>2.119364</td>
      <td>0.402742</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>-0.218701</td>
      <td>-0.280393</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.488577</td>
      <td>0.859123</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>-1.879725</td>
      <td>-1.155307</td>
    </tr>
  </tbody>
</table>
</div>




```python
df.loc[dates[2:], ['C', 'D']]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-27</th>
      <td>2.119364</td>
      <td>0.402742</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>-0.218701</td>
      <td>-0.280393</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.488577</td>
      <td>0.859123</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>-1.879725</td>
      <td>-1.155307</td>
    </tr>
  </tbody>
</table>
</div>




```python
# dimension reduction 
df.loc['20200226', ['C', 'D']]
```




    C   -1.226722
    D   -1.553299
    Name: 2020-02-26 00:00:00, dtype: float64




```python
# getting scalar value
df.loc[dates[0], 'A']
```




    0.31430543585838316




```python
# (=)fast access to scalar
df.at[dates[0], 'A'] 
```




    0.31430543585838316



#### selection by position

- Selection by Position : https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#indexing-integer


```python
# via integer
df.iloc[3]
```




    A    0.074650
    B   -0.146831
    C   -0.218701
    D   -0.280393
    Name: 2020-02-28 00:00:00, dtype: float64




```python
# integer slices (similar to np)
df.iloc[3:5, 0:2] # shows right b/f last index.
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>-0.146831</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.968962</td>
      <td>0.428461</td>
    </tr>
  </tbody>
</table>
</div>




```python
# integer list (similar to np)
df.iloc[[3, 4, 5], [0, 2]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>-0.218701</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.968962</td>
      <td>-1.488577</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.747295</td>
      <td>-1.879725</td>
    </tr>
  </tbody>
</table>
</div>




```python
# slicing rows explicitly
df.iloc[1:3, :]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
      <td>-1.226722</td>
      <td>-1.553299</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>-0.271936</td>
      <td>2.119364</td>
      <td>0.402742</td>
    </tr>
  </tbody>
</table>
</div>




```python
# slicing columns explicitly
df.iloc[:, 1:3]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>B</th>
      <th>C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>-0.319532</td>
      <td>-1.494414</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>-0.087605</td>
      <td>-1.226722</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>-0.271936</td>
      <td>2.119364</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>-0.146831</td>
      <td>-0.218701</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>0.428461</td>
      <td>-1.488577</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>-1.391477</td>
      <td>-1.879725</td>
    </tr>
  </tbody>
</table>
</div>




```python
# getting value explicitly
df.iloc[1, 1]
```




    -0.08760478253803251




```python
# (=)fast access to scalar
df.iat[1, 1]
```




    -0.08760478253803251



#### boolean indexing


```python
# using single column's values
df['A'] > 0 # series
```




    2020-02-25     True
    2020-02-26     True
    2020-02-27     True
    2020-02-28     True
    2020-02-29    False
    2020-03-01     True
    Freq: D, Name: A, dtype: bool




```python
df[df['A'] > 0] # df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.314305</td>
      <td>-0.319532</td>
      <td>-1.494414</td>
      <td>0.513665</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
      <td>-1.226722</td>
      <td>-1.553299</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>-0.271936</td>
      <td>2.119364</td>
      <td>0.402742</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>-0.146831</td>
      <td>-0.218701</td>
      <td>-0.280393</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.747295</td>
      <td>-1.391477</td>
      <td>-1.879725</td>
      <td>-1.155307</td>
    </tr>
  </tbody>
</table>
</div>




```python
# using entire df
df > 0 # shows as T/F. 
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>True</td>
      <td>False</td>
      <td>False</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>True</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>True</td>
      <td>False</td>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>True</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>True</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div>




```python
df[df > 0] # only shows True as value. 
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.314305</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.513665</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>NaN</td>
      <td>2.119364</td>
      <td>0.402742</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>NaN</td>
      <td>0.428461</td>
      <td>NaN</td>
      <td>0.859123</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.747295</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>




```python
# using isin()
df2 = df.copy()
df2['E'] = ['one', 'one', 'two', 'three', 'four', 'three']
df2
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.314305</td>
      <td>-0.319532</td>
      <td>-1.494414</td>
      <td>0.513665</td>
      <td>one</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
      <td>-1.226722</td>
      <td>-1.553299</td>
      <td>one</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>-0.271936</td>
      <td>2.119364</td>
      <td>0.402742</td>
      <td>two</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>-0.146831</td>
      <td>-0.218701</td>
      <td>-0.280393</td>
      <td>three</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.968962</td>
      <td>0.428461</td>
      <td>-1.488577</td>
      <td>0.859123</td>
      <td>four</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.747295</td>
      <td>-1.391477</td>
      <td>-1.879725</td>
      <td>-1.155307</td>
      <td>three</td>
    </tr>
  </tbody>
</table>
</div>




```python
df[df2['E'].isin(['two', 'four'])]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>-0.271936</td>
      <td>2.119364</td>
      <td>0.402742</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.968962</td>
      <td>0.428461</td>
      <td>-1.488577</td>
      <td>0.859123</td>
    </tr>
  </tbody>
</table>
</div>



#### setting


```python
# setting a new column aligning with df indexes
s1 = pd.Series([1, 2, 3, 4, 5, 6], index=pd.date_range('20200226', periods=6))
s1
```




    2020-02-26    1
    2020-02-27    2
    2020-02-28    3
    2020-02-29    4
    2020-03-01    5
    2020-03-02    6
    Freq: D, dtype: int64




```python
df['F'] = s1
```


```python
# by label
df.at[dates[0], 'A'] = 0
```


```python
# by position
df.iat[0, 1] = 0
```


```python
# by assigning with np array 
df.loc[:, 'D'] = np.array([5]*len(df))
```


```python
np.array([5]*len(df))
```




    array([5, 5, 5, 5, 5, 5])




```python
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>F</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>-1.494414</td>
      <td>5</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
      <td>-1.226722</td>
      <td>5</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>-0.271936</td>
      <td>2.119364</td>
      <td>5</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>-0.146831</td>
      <td>-0.218701</td>
      <td>5</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.968962</td>
      <td>0.428461</td>
      <td>-1.488577</td>
      <td>5</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.747295</td>
      <td>-1.391477</td>
      <td>-1.879725</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
# where operation
df2 = df.copy()
df2[df2 > 0] = -df2 # add '-' for values > 0 
df2
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>F</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>-1.494414</td>
      <td>-5</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>-0.924891</td>
      <td>-0.087605</td>
      <td>-1.226722</td>
      <td>-5</td>
      <td>-1.0</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>-0.232750</td>
      <td>-0.271936</td>
      <td>-2.119364</td>
      <td>-5</td>
      <td>-2.0</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>-0.074650</td>
      <td>-0.146831</td>
      <td>-0.218701</td>
      <td>-5</td>
      <td>-3.0</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-1.968962</td>
      <td>-0.428461</td>
      <td>-1.488577</td>
      <td>-5</td>
      <td>-4.0</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>-0.747295</td>
      <td>-1.391477</td>
      <td>-1.879725</td>
      <td>-5</td>
      <td>-5.0</td>
    </tr>
  </tbody>
</table>
</div>



### 4. missing data

- Missing Data section : https://pandas.pydata.org/pandas-docs/stable/user_guide/missing_data.html#missing-data

- `np.nan` to represent missing data
- not included in computations


```python
# reindexing (change/add/delete)
df1 = df.reindex(index=dates[0:4], columns=list(df.columns) + ['E'])
df1.loc[dates[0]:dates[1], 'E'] = 1
df1
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>F</th>
      <th>E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>-1.494414</td>
      <td>5</td>
      <td>NaN</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
      <td>-1.226722</td>
      <td>5</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>-0.271936</td>
      <td>2.119364</td>
      <td>5</td>
      <td>2.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>-0.146831</td>
      <td>-0.218701</td>
      <td>5</td>
      <td>3.0</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>




```python
# dropping rows with missing data
df1.dropna(how='any')
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>F</th>
      <th>E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
      <td>-1.226722</td>
      <td>5</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
# filling missing data
df1.fillna(value=5)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>F</th>
      <th>E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>-1.494414</td>
      <td>5</td>
      <td>5.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
      <td>-1.226722</td>
      <td>5</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>0.232750</td>
      <td>-0.271936</td>
      <td>2.119364</td>
      <td>5</td>
      <td>2.0</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.074650</td>
      <td>-0.146831</td>
      <td>-0.218701</td>
      <td>5</td>
      <td>3.0</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
# to get boolean mask for nan
pd.isna(df1)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>F</th>
      <th>E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div>



### 5. operations

- Basic section on Binary Ops. : https://pandas.pydata.org/pandas-docs/stable/getting_started/basics.html#basics-binop

#### stats
- operations in general exclude missing data.


```python
# descriptive statistic
df.mean() # 1 row
```




    A    0.001771
    B   -0.244898
    C   -0.698129
    D    5.000000
    F    3.000000
    dtype: float64




```python
# on other axis
df.mean(1) # 1 column
```




    2020-02-25    0.876397
    2020-02-26    1.122113
    2020-02-27    1.816035
    2020-02-28    1.541824
    2020-02-29    1.194185
    2020-03-01    1.495219
    Freq: D, dtype: float64




```python
s = pd.Series([1, 3, 5, np.nan, 6, 8], index=dates).shift(2)
s
```




    2020-02-25    NaN
    2020-02-26    NaN
    2020-02-27    1.0
    2020-02-28    3.0
    2020-02-29    5.0
    2020-03-01    NaN
    Freq: D, dtype: float64




```python
df.sub(s, axis='index')
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>F</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>-0.767250</td>
      <td>-1.271936</td>
      <td>1.119364</td>
      <td>4.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>-2.925350</td>
      <td>-3.146831</td>
      <td>-3.218701</td>
      <td>2.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-6.968962</td>
      <td>-4.571539</td>
      <td>-6.488577</td>
      <td>0.0</td>
      <td>-1.0</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>



#### apply
* applying functions to the data.


```python
df.apply(np.cumsum) 
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>F</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-25</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>-1.494414</td>
      <td>5</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-02-26</th>
      <td>0.924891</td>
      <td>-0.087605</td>
      <td>-2.721136</td>
      <td>10</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2020-02-27</th>
      <td>1.157641</td>
      <td>-0.359541</td>
      <td>-0.601772</td>
      <td>15</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>1.232291</td>
      <td>-0.506372</td>
      <td>-0.820474</td>
      <td>20</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>-0.736671</td>
      <td>-0.077911</td>
      <td>-2.309050</td>
      <td>25</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.010624</td>
      <td>-1.469387</td>
      <td>-4.188775</td>
      <td>30</td>
      <td>15.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
df.apply(lambda x: x.max() - x.min())
```




    A    2.893854
    B    1.819938
    C    3.999088
    D    0.000000
    F    4.000000
    dtype: float64



#### histogramming
* [Histogramming and Discretization](https://pandas.pydata.org/pandas-docs/stable/getting_started/basics.html#basics-discretization)


```python
s = pd.Series(np.random.randint(0, 7, size=10))
s
```




    0    3
    1    0
    2    1
    3    3
    4    0
    5    5
    6    3
    7    6
    8    2
    9    2
    dtype: int32




```python
s.value_counts()
```




    3    3
    2    2
    0    2
    6    1
    5    1
    1    1
    dtype: int64



#### string methods
* Series is equipped with a set of string processing methods in the str attribute that make it easy to operate on each element of the array.
* pattern-matching in str using [regular expressions](https://docs.python.org/3/library/re.html)
* [Vectorized String Methods](https://pandas.pydata.org/pandas-docs/stable/user_guide/text.html#text-string-methods)


```python
s = pd.Series(['A', 'B', 'C', 'Aaba', 'Beca', np.nan, 'CABA', 'dog', 'cat'])
s
```




    0       A
    1       B
    2       C
    3    Aaba
    4    Beca
    5     NaN
    6    CABA
    7     dog
    8     cat
    dtype: object




```python
s.str.lower()
```




    0       a
    1       b
    2       c
    3    aaba
    4    beca
    5     NaN
    6    caba
    7     dog
    8     cat
    dtype: object



### 6. merge

#### concat
* various kinds of set logic for the indexes and relational algebra functionality in the case of join / merge-type operations
* [Merging section](https://pandas.pydata.org/pandas-docs/stable/user_guide/merging.html#merging)                    


```python
df = pd.DataFrame(np.random.randn(10, 4))
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.214494</td>
      <td>0.020116</td>
      <td>0.517329</td>
      <td>0.813574</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.649767</td>
      <td>0.984025</td>
      <td>1.589738</td>
      <td>-0.072474</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.849941</td>
      <td>1.064234</td>
      <td>-0.242270</td>
      <td>0.580053</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.310610</td>
      <td>-2.410654</td>
      <td>1.060351</td>
      <td>0.235211</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.454835</td>
      <td>-1.787734</td>
      <td>-1.511475</td>
      <td>0.136709</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1.059286</td>
      <td>-1.066243</td>
      <td>-0.971410</td>
      <td>-0.860735</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1.313769</td>
      <td>1.943620</td>
      <td>1.844934</td>
      <td>0.891661</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-0.714602</td>
      <td>0.071539</td>
      <td>-1.202271</td>
      <td>-1.256158</td>
    </tr>
    <tr>
      <th>8</th>
      <td>-0.520859</td>
      <td>-0.349175</td>
      <td>0.785635</td>
      <td>1.281291</td>
    </tr>
    <tr>
      <th>9</th>
      <td>-1.323189</td>
      <td>-0.854181</td>
      <td>2.887927</td>
      <td>-0.246850</td>
    </tr>
  </tbody>
</table>
</div>




```python
# break ir into pieces
pieces = [df[:3], df[3:7], df[7:]]
pieces
```




    [          0         1         2         3
     0  0.214494  0.020116  0.517329  0.813574
     1 -0.649767  0.984025  1.589738 -0.072474
     2  0.849941  1.064234 -0.242270  0.580053,
               0         1         2         3
     3 -0.310610 -2.410654  1.060351  0.235211
     4  0.454835 -1.787734 -1.511475  0.136709
     5  1.059286 -1.066243 -0.971410 -0.860735
     6  1.313769  1.943620  1.844934  0.891661,
               0         1         2         3
     7 -0.714602  0.071539 -1.202271 -1.256158
     8 -0.520859 -0.349175  0.785635  1.281291
     9 -1.323189 -0.854181  2.887927 -0.246850]




```python
pd.concat(pieces)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.214494</td>
      <td>0.020116</td>
      <td>0.517329</td>
      <td>0.813574</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.649767</td>
      <td>0.984025</td>
      <td>1.589738</td>
      <td>-0.072474</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.849941</td>
      <td>1.064234</td>
      <td>-0.242270</td>
      <td>0.580053</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.310610</td>
      <td>-2.410654</td>
      <td>1.060351</td>
      <td>0.235211</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.454835</td>
      <td>-1.787734</td>
      <td>-1.511475</td>
      <td>0.136709</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1.059286</td>
      <td>-1.066243</td>
      <td>-0.971410</td>
      <td>-0.860735</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1.313769</td>
      <td>1.943620</td>
      <td>1.844934</td>
      <td>0.891661</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-0.714602</td>
      <td>0.071539</td>
      <td>-1.202271</td>
      <td>-1.256158</td>
    </tr>
    <tr>
      <th>8</th>
      <td>-0.520859</td>
      <td>-0.349175</td>
      <td>0.785635</td>
      <td>1.281291</td>
    </tr>
    <tr>
      <th>9</th>
      <td>-1.323189</td>
      <td>-0.854181</td>
      <td>2.887927</td>
      <td>-0.246850</td>
    </tr>
  </tbody>
</table>
</div>



#### join
* SQL style merges.
* [Database style joining](https://pandas.pydata.org/pandas-docs/stable/user_guide/merging.html#merging-join)


```python
left = pd.DataFrame({'key':['foo', 'foo'], 'lval':[1, 2]})
right = pd.DataFrame({'key':['foo', 'foo'], 'rval':[4, 5]})
pd.merge(left, right, on='key')
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>key</th>
      <th>lval</th>
      <th>rval</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>foo</td>
      <td>1</td>
      <td>4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>foo</td>
      <td>1</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>foo</td>
      <td>2</td>
      <td>4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>foo</td>
      <td>2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div>




```python
left = pd.DataFrame({'key':['foo', 'bar'], 'lval':[1, 2]})
right = pd.DataFrame({'key':['foo', 'bar'], 'rval':[4, 5]})
pd.merge(left, right, on='key')
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>key</th>
      <th>lval</th>
      <th>rval</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>foo</td>
      <td>1</td>
      <td>4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>bar</td>
      <td>2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div>



### 7. grouping
* Splitting the data into groups based on some criteria
* Applying a function to each group independently
* Combining the results into a data structure
* [Grouping section](https://pandas.pydata.org/pandas-docs/stable/user_guide/groupby.html#groupby)


```python
df = pd.DataFrame({'A':['foo', 'bar', 'foo', 'bar',
                  'foo', 'bar', 'foo', 'foo'],
                 'B':['one', 'one', 'two', 'three',
                     'two', 'two', 'one', 'three'],
                 'C':np.random.randn(8), 
                 'D':np.random.randn(8)})
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>foo</td>
      <td>one</td>
      <td>-1.655638</td>
      <td>1.628273</td>
    </tr>
    <tr>
      <th>1</th>
      <td>bar</td>
      <td>one</td>
      <td>-0.228707</td>
      <td>0.205362</td>
    </tr>
    <tr>
      <th>2</th>
      <td>foo</td>
      <td>two</td>
      <td>1.686420</td>
      <td>0.325505</td>
    </tr>
    <tr>
      <th>3</th>
      <td>bar</td>
      <td>three</td>
      <td>0.720287</td>
      <td>-1.551413</td>
    </tr>
    <tr>
      <th>4</th>
      <td>foo</td>
      <td>two</td>
      <td>-1.073604</td>
      <td>-1.109703</td>
    </tr>
    <tr>
      <th>5</th>
      <td>bar</td>
      <td>two</td>
      <td>-1.328926</td>
      <td>0.747794</td>
    </tr>
    <tr>
      <th>6</th>
      <td>foo</td>
      <td>one</td>
      <td>-0.582091</td>
      <td>-0.128181</td>
    </tr>
    <tr>
      <th>7</th>
      <td>foo</td>
      <td>three</td>
      <td>1.488025</td>
      <td>0.278419</td>
    </tr>
  </tbody>
</table>
</div>




```python
# grouping and applying sum()
df.groupby('A').sum()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>C</th>
      <th>D</th>
    </tr>
    <tr>
      <th>A</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>bar</th>
      <td>-0.837347</td>
      <td>-0.598257</td>
    </tr>
    <tr>
      <th>foo</th>
      <td>-0.136889</td>
      <td>0.994314</td>
    </tr>
  </tbody>
</table>
</div>




```python
# grouping by multiple columns forms a hierarchical index.
df.groupby(['A', 'B']).sum()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>C</th>
      <th>D</th>
    </tr>
    <tr>
      <th>A</th>
      <th>B</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">bar</th>
      <th>one</th>
      <td>-0.228707</td>
      <td>0.205362</td>
    </tr>
    <tr>
      <th>three</th>
      <td>0.720287</td>
      <td>-1.551413</td>
    </tr>
    <tr>
      <th>two</th>
      <td>-1.328926</td>
      <td>0.747794</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">foo</th>
      <th>one</th>
      <td>-2.237729</td>
      <td>1.500093</td>
    </tr>
    <tr>
      <th>three</th>
      <td>1.488025</td>
      <td>0.278419</td>
    </tr>
    <tr>
      <th>two</th>
      <td>0.612815</td>
      <td>-0.784198</td>
    </tr>
  </tbody>
</table>
</div>



### 8. reshaping 
* [Hierarchical Indexing](https://pandas.pydata.org/pandas-docs/stable/user_guide/advanced.html#advanced-hierarchical) and [Reshaping](https://pandas.pydata.org/pandas-docs/stable/user_guide/reshaping.html#reshaping-stacking)

#### stack


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


```python

```


```python
# from 제호님
for i in range(10):
    globals()['{}'.format(i)] = list[]
```
